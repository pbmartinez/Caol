@page "/comercial-performance"
@using Application.Dtos
@using BlazorApp.Shared.Components

@inject HttpClient Http
@inject IStringLocalizer<Resource> Localizer


<MudDatePicker Label="Inicio" @bind-Date="startDate" FixDay=1/>

<MudDatePicker Label="Fin" @bind-Date="endDate" FixDay=1/>

@if(Usuarios != null && Usuarios.Count > 0)
{
    <MudChipSet @bind-SelectedChips="selected" MultiSelection="true" Filter="true">
        <MudChip Text="Milk" ></MudChip>
        <MudChip Text="Eggs"></MudChip>
        <MudChip Text="Soap"></MudChip>
        <MudChip Text="Cornflakes" ></MudChip>
        <MudChip Text="Salad"></MudChip>
        <MudChip Text="Apples"></MudChip>
        <MudChip Text="Red wine"></MudChip>

    
            @foreach(var item in Usuarios)
            {
                var nombre = item.NoUsuario;
                <MudChip Text="@nombre"></MudChip>
            }
    
    </MudChipSet>
}


@*<MudButton OnClick="ShowPizzaAsync"> Show Pizza </MudButton>*@


@code {

    DateTime? startDate;
    DateTime? endDate;
    //List<string> coUsuarios = new List<string>(20);
    MudChip[] selected ;
    List<CaoUsuarioDto> Usuarios = new List<CaoUsuarioDto> ();

    protected override async Task OnInitializedAsync()
    {
        startDate = DateTime.Today.AddDays(-DateTime.Today.Day+1);
        endDate = DateTime.Today.AddDays(-DateTime.Today.Day+1).AddMonths(1);
            
        var us = await Http.GetFromJsonAsync<List<CaoUsuarioDto>>("api/usuarios");
        Usuarios = us ?? new List<CaoUsuarioDto>();
    }

    //private async Task ShowPizzaAsync()
    //{
            
    //}
}

